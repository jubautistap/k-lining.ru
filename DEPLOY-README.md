# Деплой KliningPro

## Первоначальная настройка

Перед первым деплоем настройте SSH ключи:

```bash
./setup-ssh.sh
```

Этот скрипт:
- Создаст SSH ключ (если не существует)
- Скопирует ключ на сервер
- Настроит автоматическое подключение без пароля

## Автоматический деплой

Для автоматического деплоя с локальной машины:

```bash
./deploy.sh
```

Этот скрипт:
- Подключается к серверу 80.87.201.107
- Обновляет git репозиторий
- Устанавливает зависимости
- Собирает проект
- Перезапускает PM2 процесс

## Ручной деплой на сервере

Если автоматический деплой не работает или сервер недоступен, выполните на сервере:

```bash
# Подключиться к серверу
ssh root@80.87.201.107

# Перейти в папку проекта
cd /var/www/kliningpro

# Запустить деплой скрипт
./deploy-manual.sh
```

Или выполнить команды вручную:

```bash
# Сохранить изменения
git stash push -m "Автосохранение"

# Обновить git
git fetch origin
git reset --hard origin/main

# Установить зависимости
npm install

# Собрать проект
npm run build

# Перезапустить PM2
pm2 restart kliningpro

# Проверить статус
pm2 status
```

## Настройки сервера

- **Сервер**: 80.87.201.107
- **Пользователь**: root
- **Путь**: /var/www/kliningpro
- **PM2 процесс**: kliningpro

## Проверка деплоя

После деплоя проверьте:
1. Сайт доступен: https://k-lining.ru
2. PM2 процесс работает: `pm2 status`
3. Логи без ошибок: `pm2 logs kliningpro` 