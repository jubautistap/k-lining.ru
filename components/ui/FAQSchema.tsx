'use client';

import React from 'react';

interface FAQItem {
  question: string;
  answer: string;
}

interface FAQSchemaProps {
  items?: FAQItem[];
  faqs?: FAQItem[];
  displayFAQ?: boolean; // Опция для отображения FAQ на странице
}

// FAQ для разных типов услуг
export const FAQ_SETS = {
  'apartment-cleaning': [
    {
      question: 'Сколько стоит уборка квартиры в Москве?',
      answer: 'Стоимость уборки квартиры зависит от площади и типа уборки. Поддерживающая уборка от 3500₽, генеральная от 5000₽. Точную цену рассчитайте в калькуляторе на сайте.'
    },
    {
      question: 'Сколько времени занимает уборка квартиры?',
      answer: 'Обычно уборка 1-2 комнатной квартиры занимает 2-3 часа, 3-4 комнатной – 4-5 часов. Генеральная уборка может занять до 6-8 часов в зависимости от состояния.'
    },
    {
      question: 'Какие средства вы используете для уборки?',
      answer: 'Мы используем профессиональные эко-средства, безопасные для детей и животных. Вся химия сертифицирована, не вызывает аллергии и не оставляет вредных испарений.'
    },
    {
      question: 'Можете ли вы убрать квартиру в выходные?',
      answer: 'Да, мы работаем 24/7 включая выходные и праздники. Стоимость остается той же, доплата за работу в выходные не взимается.'
    }
  ],

  'office-cleaning': [
    {
      question: 'Как часто нужна уборка офиса?',
      answer: 'Рекомендуется ежедневная поддерживающая уборка и еженедельная генеральная. Для небольших офисов достаточно 2-3 раза в неделю. Все зависит от проходимости и специфики работы.'
    },
    {
      question: 'Предоставляете ли документы для отчетности?',
      answer: 'Да, мы предоставляем полный пакет документов: договор, акты выполненных работ, счета-фактуры. Работаем как с НДС, так и без НДС.'
    },
    {
      question: 'В какое время можете убирать офис?',
      answer: 'Убираем офисы в любое удобное время: до работы (с 6:00), после работы (с 18:00), в выходные. График подстраиваем под ваш рабочий режим.'
    },
    {
      question: 'Убираете ли вы конфиденциальные документы?',
      answer: 'Мы соблюдаем полную конфиденциальность. Документы не перемещаем без разрешения. Все сотрудники подписывают соглашение о неразглашении.'
    }
  ],

  'window-cleaning': [
    {
      question: 'Моете ли окна снаружи на высоких этажах?',
      answer: 'Да, моем окна на любой высоте. У нас есть альпинистское снаряжение и опытные мастера. Соблюдаем все требования безопасности высотных работ.'
    },
    {
      question: 'Останутся ли разводы после мытья окон?',
      answer: 'Нет, мы гарантируем мытье без разводов. Используем профессиональные средства, скребки и салфетки. Если разводы появятся – переделаем бесплатно.'
    },
    {
      question: 'Можете ли мыть окна зимой?',
      answer: 'Да, моем окна круглый год при температуре до -10°C. Используем незамерзающие средства. В сильные морозы работаем только изнутри.'
    },
    {
      question: 'Сколько стоит помыть окна в квартире?',
      answer: 'Стоимость от 600₽ за створку (обе стороны). Балконные рамы от 400₽. Точную цену назовем после осмотра или по фотографиям окон.'
    }
  ],

  'furniture-dry-cleaning': [
    {
      question: 'Какие пятна можете удалить с мебели?',
      answer: 'Удаляем большинство пятен: кровь, вино, кофе, жир, краска, детские загрязнения, пятна от домашних животных. Сложные пятна оцениваем индивидуально.'
    },
    {
      question: 'Через сколько можно пользоваться мебелью после чистки?',
      answer: 'После химчистки мебель сохнет 2-4 часа в зависимости от ткани и влажности. Ускоряем сушку специальными вентиляторами.'
    },
    {
      question: 'Безопасна ли химчистка для детей и животных?',
      answer: 'Да, мы используем только безопасные гипоаллергенные средства. После чистки и сушки мебель полностью безопасна для детей и домашних животных.'
    },
    {
      question: 'Можете ли почистить кожаную мебель?',
      answer: 'Да, чистим кожаную мебель специальными средствами. Используем кондиционеры для кожи, которые не только очищают, но и питают материал.'
    }
  ],

  'post-renovation-cleaning': [
    {
      question: 'Что входит в уборку после ремонта?',
      answer: 'Удаление строительной пыли, мытье всех поверхностей, окон, полов. Очистка сантехники, радиаторов, выключателей. Влажная уборка всех помещений до идеального состояния.'
    },
    {
      question: 'Сколько времени занимает послестроительная уборка?',
      answer: 'Уборка 1-2 комнатной квартиры занимает 6-8 часов, 3-4 комнатной – 10-12 часов. Время зависит от степени загрязнения и объема работ.'
    },
    {
      question: 'Убираете ли строительный мусор?',
      answer: 'Убираем мелкий строительный мусор (опилки, пыль, остатки материалов). Крупный мусор (плитка, доски) убирается за отдельную плату.'
    },
    {
      question: 'Нужно ли что-то подготовить к уборке?',
      answer: 'Желательно убрать крупный мусор, обеспечить доступ к электричеству и воде. Мелкие приготовления мы сделаем сами – защитим мебель, подготовим инвентарь.'
    }
  ],

  'house-cleaning': [
    {
      question: 'Убираете ли загородные дома в Подмосковье?',
      answer: 'Да, выезжаем в Московскую область в радиусе 50 км от МКАД. Доплата за выезд от 1000₽ в зависимости от расстояния.'
    },
    {
      question: 'Можете ли убрать дом большой площади?',
      answer: 'Убираем дома любой площади от 100 до 1000 м². Для больших объектов формируем бригаду из нескольких человек для быстрого выполнения.'
    },
    {
      question: 'Убираете ли придомовую территорию?',
      answer: 'Основная специализация – внутренняя уборка дома. Мытье террас, веранд, садовой мебели включаем в услугу. Уборка участка обсуждается отдельно.'
    },
    {
      question: 'Какое оборудование привозите для уборки дома?',
      answer: 'Привозим профессиональные пылесосы, поломоечные машины, удлинители, всю необходимую химию и инвентарь. Используем собственное оборудование для качественной уборки.'
    }
  ],

  'general': [
    {
      question: 'Как быстро можете приехать на уборку?',
      answer: 'Обычно выезжаем в течение 2-4 часов после заказа. Для срочных заказов можем приехать в течение часа (доплата 500₽).'
    },
    {
      question: 'Предоставляете ли гарантию на работу?',
      answer: 'Да, предоставляем гарантию качества. Если что-то не устроит – переделаем бесплатно в течение 24 часов.'
    },
    {
      question: 'Можно ли заказать регулярную уборку?',
      answer: 'Да, предоставляем скидки на регулярную уборку: еженедельно -10%, 2 раза в месяц -5%. Составляем удобный график.'
    },
    {
      question: 'Застрахована ли ваша работа?',
      answer: 'Да, у нас есть страхование гражданской ответственности. Возместим ущерб в случае порчи имущества по нашей вине.'
    }
  ]
};

export default function FAQSchema({ items, faqs, displayFAQ = false }: FAQSchemaProps) {
  const faqList = items || faqs || [];
  
  if (!faqList.length) return null;
  
  const faqSchema = {
    '@context': 'https://schema.org',
    '@type': 'FAQPage',
    mainEntity: faqList.map(faq => ({
      '@type': 'Question',
      name: faq.question,
      acceptedAnswer: {
        '@type': 'Answer',
        text: faq.answer
      }
    }))
  };

  return (
    <>
      {/* Schema.org JSON-LD */}
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(faqSchema) }}
      />
      
      {/* Визуальное отображение FAQ (опционально) */}
      {displayFAQ && (
        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <h2 className="text-2xl font-bold text-gray-900 mb-6">
            Часто задаваемые вопросы
          </h2>
          <div className="space-y-4">
            {faqList.map((faq, index) => (
              <details key={index} className="group">
                <summary className="flex justify-between items-center cursor-pointer p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                  <h3 className="font-medium text-gray-900 pr-4">
                    {faq.question}
                  </h3>
                  <span className="text-gray-500 group-open:rotate-180 transition-transform">
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </summary>
                <div className="mt-4 p-4 text-gray-700 leading-relaxed">
                  {faq.answer}
                </div>
              </details>
            ))}
          </div>
        </div>
      )}
    </>
  );
}

// Функция для получения FAQ по типу услуги
export function getFAQByService(serviceType: keyof typeof FAQ_SETS): FAQItem[] {
  return FAQ_SETS[serviceType] || FAQ_SETS.general;
}

// Компонент для быстрого добавления FAQ на страницу услуги
export function ServiceFAQ({ 
  serviceType, 
  displayFAQ = true,
  additionalFAQs = []
}: { 
  serviceType: keyof typeof FAQ_SETS;
  displayFAQ?: boolean;
  additionalFAQs?: FAQItem[];
}) {
  const serviceFAQs = getFAQByService(serviceType);
  const allFAQs = [...serviceFAQs, ...additionalFAQs];

  return (
    <FAQSchema 
      faqs={allFAQs}
      displayFAQ={displayFAQ}
    />
  );
}